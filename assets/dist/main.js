function S(n){document.querySelectorAll(".kg-embed-card iframe").forEach(i=>{const t=i.getAttribute("width"),a=i.getAttribute("height");!isNaN(t)&&!isNaN(a)&&(i.classList.add("has-aspect-ratio"),i.style.setProperty("--asona--aspect-ratio",`${t}/${a}`))})}const A=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));function E(){document.querySelectorAll(".kg-gallery-image img").forEach(s=>{const i=s.closest(".kg-gallery-image"),t=s.getAttribute("width"),a=s.getAttribute("height"),c=t/a;i.style.flex=c+" 1 0%"})}const $=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));function j(n){document.querySelectorAll(".kg-toggle-heading button").forEach(t=>t.addEventListener("click",i,!1));function i(t){const c=t.target.closest(".kg-toggle-card"),l=c.querySelector(".kg-toggle-content"),o=c.getAttribute("data-kg-toggle-state")==="close",r=l.scrollHeight;c.setAttribute("data-kg-toggle-state",o?"opening":"closing"),l.style.setProperty("--asona--toggle--max-height",`${r}px`),o||setTimeout(()=>{l.style.setProperty("--asona--toggle--max-height","0px")},10),setTimeout(()=>{c.setAttribute("data-kg-toggle-state",o?"open":"close")},300)}}const x=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));function T(){const n=document.querySelector(".comments iframe");n?.addEventListener("load",t=>{const a=t.target;a.contentDocument.documentElement.classList.add("asona-comments-iframe"),document.querySelectorAll("style").forEach(c=>{a.contentDocument.head.appendChild(c.cloneNode(!0))}),document.querySelectorAll('link[rel="stylesheet"]').forEach(c=>{a.contentDocument.head.appendChild(c.cloneNode(!0))}),s(i())}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{const a=t.matches?"dark":"light";s(a)}),window.addEventListener("asona:color-scheme-changed",t=>{const a=t.detail.colorScheme;s(a)});function s(t){t=t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t,n?.contentDocument.documentElement.setAttribute("data-has-dark-mode-support",!0),n?.contentDocument.documentElement.setAttribute("data-prefers-color-scheme",t),n?.contentDocument.querySelector(".ghost-display")?.classList.toggle("dark",t==="dark")}function i(){const t=document.documentElement.getAttribute("data-prefers-color-scheme");return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}}const O=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));function k(){const n=document.querySelector(".pagination-load-more");if(!n)return;const s=n.closest(".pagination"),i=document.querySelector(".posts-feed"),t=window.asona_infinite_scroll===!0;let a=null;t&&(a=new window.IntersectionObserver(l=>{l[0].isIntersecting&&n.click()},{threshold:0,rootMargin:"100%"}),a.observe(s)),n.addEventListener("click",c,!1);function c(l){l.preventDefault();const o=l.currentTarget,r=o.getAttribute("href"),e=o.getAttribute("data-state")==="loading",d={page:parseInt(s.querySelector("[data-pagination-page]").getAttribute("data-pagination-page"),10),pages:parseInt(s.querySelector("[data-pagination-pages]").getAttribute("data-pagination-pages"),10)};e||(d.page++,n.setAttribute("data-state","loading"),window.fetch(r).then(u=>u.text()).then(u=>{const m=new window.DOMParser().parseFromString(u,"text/html"),g=m.querySelectorAll(".posts-feed .post"),f=m.querySelector(".pagination-load-more"),_=m.querySelector(".pagination__info"),w=s.querySelector(".pagination__info");if(g&&(g.forEach((v,U)=>{i.append(v)}),g[0].querySelector(".post-card__media")?.focus({preventScroll:!0})),f&&d.page!==d.pages){const b=f.getAttribute("href");n.setAttribute("href",b)}else n.remove(),t&&a.unobserve(s);s.querySelector(".pagination__container").replaceChild(_,w),n.setAttribute("data-state","initial")}).catch(u=>{console.log(u),n.setAttribute("data-state","error")}))}}const q=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));function p(n,s=100){let i;return(...t)=>{clearTimeout(i),i=setTimeout(()=>{n.apply(this,t)},s)}}function M(){const n=document.querySelectorAll('[data-highlight="modern"] .post-card');if(!n.length)return;function s(o,r,e){return Math.min(e,Math.max(o,r)).toFixed(2)}function i(){return window.matchMedia("(max-width: 767px)").matches}let t=[];function a(){t=[];const o=document.documentElement.scrollTop;n.forEach(r=>{const e=r.getBoundingClientRect(),d=r.querySelector(".post-card__content").getBoundingClientRect(),u={startFadeIn:e.top+o-window.innerHeight*.9,stopFadeIn:e.top+o-window.innerHeight*.45,startFadeOut:d.top+o-64,stopFadeOut:e.height+e.top+o-e.height/8,startTranslate:e.top+o+e.height/8,stopTranslate:e.top+o+e.height*3};t.push({element:r,anime:u,height:e.height,isMobile:i()})})}function c(){const o=document.documentElement.scrollTop;for(let r=0;r<t.length;r++){const e=t[r];if(e.anime.startFadeOut<=o&&e.anime.stopFadeOut>=o){const d=1-(o-e.anime.startFadeOut)/(e.anime.stopFadeOut-e.anime.startFadeOut);e.element.style.opacity=s(d,.1,1)}if(e.anime.startFadeOut>=o&&e.anime.startFadeIn<=o&&(e.element.style.opacity=1),(e.anime.stopFadeOut<o||e.anime.startFadeIn>o)&&(e.element.style.opacity=.1),e.anime.startFadeIn<=o&&e.anime.stopFadeIn>=o){const d=(o-e.anime.startFadeIn)/(e.anime.stopFadeIn-e.anime.startFadeIn);e.element.style.opacity=s(d,.1,1)}if(e.anime.startTranslate<=o&&e.anime.stopTranslate>=o&&!e.isMobile){const d=(o-e.anime.startTranslate)/(e.anime.stopTranslate-e.anime.startTranslate),u=Math.round(d*e.height*1.3);e.element.style.transform=`translate3d(0, ${u}px, 0)`}e.anime.startTranslate>o&&(e.element.style.transform="translate3d(0,0,0)")}}window.addEventListener("resize",p(()=>{a(),c()}));function l(){c(),window.requestAnimationFrame(l)}a(),l()}const P=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));function F(n){document.querySelectorAll(".sharing-buttons [data-social]").forEach(t=>t.addEventListener("click",i));function i(t){const a=t.currentTarget,c=a.getAttribute("data-social"),l=a.getAttribute("href");if(c==="copy-link"){const o=a.getAttribute("data-copy-link");return window.navigator.clipboard.writeText(o).then(()=>{const r=a.querySelector("[role=tooltip]");r.setAttribute("aria-hidden","false"),setTimeout(()=>{r.setAttribute("aria-hidden","true")},2500)}),!1}c!=="mail"&&(t.preventDefault(),window.open(l,"_blank","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=500,top=40,left=40"))}}const I=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));function L(){const n=document.querySelector(".site-header"),s=document.querySelector(".site-actions"),i=n.querySelectorAll("[data-site-action-trigger]"),t=s.querySelector("[data-close-site-actions]");i.forEach(l=>{l.addEventListener("click",a)}),window.addEventListener("resize",p(()=>{window.document.documentElement.style.setProperty("--asona--dvh",`${window.innerHeight}px`)}));function a(l){const o=l.currentTarget,r=o.getAttribute("data-site-action-trigger"),e=o.getAttribute("aria-expanded")==="true",d=document.getElementById(o.getAttribute("aria-controls"));c(),e||(document.body.style.overflow="hidden",window.document.documentElement.style.setProperty("--asona--dvh",`${window.innerHeight}px`),o.setAttribute("aria-expanded",!0),n.setAttribute("data-state",`${r}-opening`),s.style.setProperty("--asona--site-actions--height",`${d.scrollHeight}px`),n.style.setProperty("--asona--site-header--offset",`${window.Math.max(0,n.getBoundingClientRect().top)}px`),setTimeout(()=>{n.setAttribute("data-state",`${r}-open`)},150));const u=new window.CustomEvent("asona:site-actions",{detail:{isExpanded:!e,action:r,el:o,controls:d}});window.dispatchEvent(u)}function c(){i.forEach(l=>{l.setAttribute("aria-expanded",!1)}),n.removeAttribute("data-state"),document.body.style.overflow=""}t.addEventListener("click",c)}const C=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));function H(){document.querySelectorAll("[data-toggle-color-scheme]").forEach(i=>{i.addEventListener("click",s)});function s(i){const a=i.currentTarget.getAttribute("data-toggle-color-scheme");a==="system"?(window.localStorage.removeItem(`asona-pcs-${window.location.hostname}`),document.documentElement.removeAttribute("data-prefers-color-scheme")):(window.localStorage.setItem(`asona-pcs-${window.location.hostname}`,a),document.documentElement.setAttribute("data-prefers-color-scheme",a)),document.documentElement.setAttribute("data-transitions-disabled",!0),setTimeout(()=>{document.documentElement.removeAttribute("data-transitions-disabled")},10);const l=new window.CustomEvent("asona:color-scheme-changed",{detail:{colorScheme:a}});window.dispatchEvent(l)}}const z=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));function D(){const n=document.querySelector(".site-header"),s=t=>{const a=!t[0].isIntersecting;n.setAttribute("data-is-sticky",a)};new window.IntersectionObserver(s,{root:document,threshold:[1]}).observe(n)}const N=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));function B(){const n=document.querySelector(".site-header"),s=document.querySelector(".site-navigation"),i=s.querySelectorAll("[data-open-submenu]"),t=s.scrollHeight,a=new Map;i.forEach(r=>{r.addEventListener("click",c)}),s.querySelectorAll("[data-has-submenu]").forEach(r=>{r.addEventListener("focusout",e=>{!r.contains(e.relatedTarget)&&window.matchMedia("(min-width: 62.5em)").matches&&(r.querySelector("[aria-expanded]").setAttribute("aria-expanded",!1),r.querySelector("[aria-hidden]").setAttribute("aria-hidden",!0))})}),window.addEventListener("resize",p(()=>{o()})),window.addEventListener("asona:site-actions",r=>{r.detail.isExpanded?o():a.clear()}),document.addEventListener("click",r=>{s&&s!==r.target&&!s.contains(r.target)&&l()});function c(r){const e=r.currentTarget,d=e.getAttribute("aria-controls"),u=document.getElementById(d),h=e.closest(".nav-submenu"),m=e.getAttribute("aria-expanded")==="true",g=u.scrollHeight;e.setAttribute("aria-expanded",!m),u.setAttribute("aria-hidden",m),m?(u.style.setProperty("--nav-submenu-max-height",0),a.set(d,0)):(h&&h.style.setProperty("--nav-submenu-max-height",h.scrollHeight+g+"px"),u.style.setProperty("--nav-submenu-max-height",g+"px"),a.set(d,g)),o()}function l(r){i.forEach(e=>{e.setAttribute("aria-expanded",!1),e.nextElementSibling.setAttribute("aria-hidden",!0)}),a.clear()}function o(){const r=window.getComputedStyle(document.documentElement).getPropertyValue("--asona--safe-area--bottom")>"0px",e=window.innerHeight,d=Array.from(a.values()).reduce((m,g)=>m+g,0),u=t+d,h=s.getBoundingClientRect().top;r&&e>u+h+10?n.style.setProperty("--asona--safe-area--bottom","0px"):n.style.removeProperty("--asona--safe-area--bottom")}}const R=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"})),y=Object.assign({"./js/cards/embed.js":A,"./js/cards/gallery.js":$,"./js/cards/toggle.js":x,"./js/components/comments.js":O,"./js/components/pagination-load-more.js":q,"./js/components/posts-highlight-modern.js":P,"./js/components/sharing-buttons.js":I,"./js/components/site-actions.js":C,"./js/components/site-color-scheme.js":z,"./js/components/site-header.js":N,"./js/components/site-navigation.js":R});for(const n in y)y[n].default();document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{const n=window.innerWidth-document.body.offsetWidth;document.documentElement.setAttribute("data-dom-content-loaded",!0),document.documentElement.style.setProperty("--asona--scrollbar-width",`${n}px`)},10)});const W=new window.MutationObserver(n=>{const s=window.getComputedStyle(document.body);document.documentElement.toggleAttribute("data-scroll-disabled",s.overflow==="hidden")});W.observe(document.body,{attributes:!0});
